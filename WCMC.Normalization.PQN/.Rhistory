input = 'compound index	sample1	sample2	sample3	sample4	sample5	sample6	sample7	sample8	sample9	sample10
compound 1	0.375539896	0.065899686	0.496939834	0.534084846	0.716702517	0.950021081	0.750360989	0.689267761	0.484818318	0.531683366
compound 2	0.206362605	0.751998348	0.942184615	0.206394675	0.585332792	0.747429124	0.591602986	0.892103949	0.213276914	0.841363479
compound 3	0.320140356	0.282510381	0.152143414	0.660063056	0.563975871	0.455721993	0.248184925	0.551075501	0.513916307	0.605137837
compound 4	0.20639852	0.342488513	0.377058181	0.072792314	0.111507061	0.349741009	0.207383158	0.38826326	0.562160107	0.589853168
compound 5	0.135425902	0.051918493	0.227762081	0.403017838	0.655777946	0.011849089	0.271320615	0.073403869	0.84444792	0.615436238
compound 6	0.616156795	0.621099447	0.331352935	0.559438334	0.852012923	0.542562227	0.815533378	0.225449985	0.299553123	0.691357522
compound 7	0.352797968	0.075572132	0.357330296	0.502733849	0.234612323	0.755412168	0.782320137	0.278486293	0.146923068	0.224468534
compound 8	0.212669408	0.963328103	0.264610641	0.939520504	0.915010224	0.306447668	0.638220615	0.416558741	0.408093063	0.111390696
compound 9	0.737475111	0.477069404	0.409384057	0.130882785	0.76113433	0.765912965	0.958689287	0.153819885	0.508932246	0.219095508
compound 10	0.441638219	0.906535571	0.904896034	0.514376867	0.946055314	0.546109101	0.273048397	0.694480005	0.580014151	0.367301685
compound 11	0.560800522	0.241851762	0.915308656	0.276144522	0.52710235	0.140633921	0.085760849	0.971778416	0.198352625	0.433389727
compound 12	0.3042778	0.087429392	0.339533042	0.258864548	0.434145082	0.525673934	0.880516111	0.796144325	0.21432508	0.786479185
compound 13	0.927352596	0.809354145	0.521789817	0.132598009	0.354873129	0.54587454	0.905302895	0.591731126	0.712139836	0.355582239
compound 14	0.80044224	0.755691572	0.679934638	0.433222185	0.673573865	0.997679865	0.470027094	0.447200938	0.016889784	0.643407241
compound 15	0.374319379	0.398598057	0.597866875	0.113390755	0.889121439	0.91875724	0.261641946	0.33443309	0.161977598	0.718325491
compound 16	0.824364189	0.557636205	0.027706202	0.64560174	0.123939069	0.479622547	0.727113559	0.153183953	0.737656127	0.788080284
compound 17	0.532976966	0.706289045	0.486952088	0.412154294	0.439943672	0.475253711	0.549267441	0.950895467	0.888014992	0.491156531
compound 18	0.658270205	0.310558256	0.560285311	0.369547645	0.50986586	0.126320243	0.138691771	0.118098592	0.013933713	0.642171724
compound 19	0.976136566	0.935824649	0.477713008	0.369850288	0.830332397	0.173360166	0.166329562	0.623136293	0.633352067	0.430893335
compound 20	0.934374814	0.840576377	0.384396985	0.328708995	0.146584056	0.078071197	0.301708041	0.213188032	0.153279604	0.240768458
'
pacman::p_load(data.table)
input <- gsub("\r","",input)
cfile <- strsplit(input,"\n")[[1]]
df1 <- as.data.frame(do.call(rbind,lapply(cfile,function(x){strsplit(x,"\t")[[1]]})),stringsAsFactors = F)
colnames(df1) = as.matrix(df1[1,])[1,]
df1 = df1[-1,]
data = sapply(df1[,-1], as.numeric)
reference <- apply(data, 1, median)
quotient <- data / reference
quotient.median <- apply(quotient, 2, median)
result <- t(t(data) / quotient.median)
result = cbind(data.frame(df1[,1]),result)
rownames(result) = 1:nrow(result)
colnames(result) = colnames(df1)
result
library(WCMC.Normalization.PQN)
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(WCMC.Normalization.PQN)
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(WCMC.Normalization.PQN)
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(WCMC.Normalization.PQN)
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
install.packages("pacman")
library(WCMC.Normalization.PQN)
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(WCMC.Normalization.PQN)
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(WCMC.Normalization.PQN)
library(WCMC.Normalization.PQN)
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(WCMC.Normalization.PQN)
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(WCMC.Normalization.PQN)
library(opencpu);
opencpu$browse("library/WCMC.Normalization.PQN/www")
library(WCMC.Normalization.PQN)
