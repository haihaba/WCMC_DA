{
    "collab_server" : "",
    "contents" : "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <meta name=\"description\" content=\"\">\n  <meta name=\"author\" content=\"\">\n  <link href=\"bootstrap.css\" rel=\"stylesheet\">\n  <link href=\"sb-admin-2.min.css\" rel=\"stylesheet\">\n  <link href=\"font-awesome.css\" rel=\"stylesheet\">\n  <link href=\"WCMC.Normalization.mTIC.css\" rel=\"stylesheet\">\n  <script type=\"text/javascript\" src=\"jquery-2.2.3.min.js\"></script>\n  <script type=\"text/javascript\" src=\"opencpu-0.5.js\"></script>\n  <script type=\"text/javascript\" src=\"bootstrap.js\"></script>\n  <script type=\"text/javascript\" src=\"spin.js\"></script>\n  <script type=\"text/javascript\" src=\"spinner.js\"></script>\n  <script type=\"text/javascript\" src=\"WCMC.Normalization.mTIC.js\"></script>\n  <script>\n  </script>\n  <title>Normalization.mTIC </title>\n  <script>\n  </script>\n</head>\n\n<body>\n\n  <div >\n    <!-- Navigation -->\n<nav class=\"navbar navbar-default navbar-static-top\" role=\"navigation\" style=\"margin-bottom: 0\">\n            <div class=\"navbar-header\">\n                <a class=\"navbar-brand\" href=\"#\">mTIC: Total Ion Chromatogram using identified Metabolites</a>\n            </div>\n        </nav>\n\n\n\n    <div>\n      <div class=\"container-fluid\">\n        <!-- Page Heading -->\n        <div class=\"row\">\n          <div class=\"col-lg-12\">\n          </div>\n        </div>\n        <!-- /.row -->\n        <!-- Main content -->\n\n\t\t<div class=\"row\"> <!-- Data File Input -->\n          <div class=\"col-lg-12\">\n            <div class=\"panel panel-info\">\n              <div class=\"panel-heading\">\n                <h3 class=\"panel-title\"><a data-toggle=\"collapse\" data-target=\"#input\" href=\"#\">Input</a></h3>\n              </div>\n              <div id=\"input\" class=\"panel-body collapse in\">\n                <form role=\"form\">\n                  <div class=\"form-group\">\n                    <textarea class=\"form-control\" id=\"rawinput\" name=\"txtinput\" rows=\"5\" placeholder = \"paste your input here.\"></textarea>\n                    <span for=\"rawinput\"><a href=\"sample.txt\" target=\"_blank\"> Example Data File </a></span><a href=\"instruction.png\" target=\"_blank\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-html=\"true\" title=\"format explaination\"><i class=\"fa fa-question-circle\"></i></a>&nbsp;<a href=\"template.xlsx\" target=\"_blank\" data-toggle=\"tooltip\" data-placement=\"bottom\" data-html=\"true\" title=\"download format\"><i class=\"fa fa-download\"></i></a>\n                  </div>\n                  <!-- /.row -->\n                  <button id=\"compute\" type=\"button\" class=\"btn btn-primary\">Run</button>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n\t\t<div class=\"row\"> <!-- Output -->\n          <div class=\"col-lg-12\">\n            <div class=\"panel panel-success\">\n              <div class=\"panel-heading\" >\n                <h3 class=\"panel-title\"><a data-toggle=\"collapse\" data-target=\"#output\" href=\"#\" class=\"collapsed\" id=\"outputpanelheader\">Output</a></h3>\n              </div>\n              <div id=\"output\" class=\"panel-body collapse\">\n                No output yet.\n              </div>\n            </div>\n          </div>\n        </div>\n\n\t\t<div class=\"row\"> <!-- Instructions -->\n          <div class=\"col-lg-12\">\n            <div class=\"panel panel-warning\">\n              <div class=\"panel-heading\" >\n                <h3 class=\"panel-title\"><a data-toggle=\"collapse\" data-target=\"#instrtuction\" href=\"#\" class=\"collapsed\">Instruction</a></h3>\n              </div>\n              <div id=\"instrtuction\" class=\"panel-body collapse\">\n                <p>There are many different types of normalizations in the scientific literature. We usually provide first a variant of a ‘vector normalization’ in which we calculate the sum of all peak heights for all identified metabolites (but not the unknowns!) for each sample. We call such peak-sums “mTIC” in analogy to the term TIC used in mass spectrometry (for ‘total ion chromatogram’), but with the notification &quot;mTIC&quot; to indicate that we only use genuine metabolites (identified compounds) in order to avoid using potential non-biological artifacts for the biological normalizations, such as column bleed, plasticizers or other contaminants. When the treatment relations to groups are kept blinded, data will be normalized to the total average mTIC.</p>\n                <p>Following equation is then used for normalizations for metabolite i of sample j:</p>\n                <img src=\"mTIC equation.PNG\">\n                <p>A good paper of mTIC normalization is <a href=\"http://onlinelibrary.wiley.com/doi/10.1002/0471142727.mb3004s114/full\" target=\"_blank\">here</a>.</p>\n<button type=\"button\" class=\"btn btn-primary btn-circle\" id=\"codeToggle\"><b>R</b></button>\n<div class=\"well well-sm\" id='code' style=\"display:none;\">\n<pre><code>mainApp = function(input){\n  library(pacman)\n  pacman::p_load(data.table)\n  input = gsub(\"\\r\",\"\",input)\n  cfile = strsplit(input,\"\\n\")[[1]]\n  df1 = as.data.frame(do.call(rbind,lapply(cfile,function(x){strsplit(x,\"\\t\")[[1]]})),stringsAsFactors = F)\n  colnames(df1) = as.matrix(df1[1,])[1,]\n  df1 = df1[-1,]\n  data = sapply(df1[,-c(1,2)], as.numeric)\n  sums = apply(data[df1[,2]=='known',],2,  sum, na.rm=T)\n  mean_sums = mean(sums)\n  result = t(t(data)/(sums/mean_sums))\n  result = cbind(df1[,c(1,2)],result)\n  rownames(result) = 1:nrow(result)\n  fwrite(result,\"mTIC-normalization.csv\")\n  return(result)\n}</code></pre>\n                    </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n\n\n\t\t<div class=\"row\"> <!-- Citations -->\n          <div class=\"col-lg-12\">\n            <div class=\"panel panel-default\">\n              <div class=\"panel-heading\">\n                <h3 class=\"panel-title\"><a data-toggle=\"collapse\" data-target=\"#citations\" href=\"#\" >Citations</a></h3>\n            </div>\n              <div id=\"citations\" class=\"panel-body collapse in\">\n                <p>Fiehn O. Metabolomics by Gas Chromatography–Mass Spectrometry: Combined Targeted and Untargeted Profiling. Current Protocols in Molecular Biology. 2016 Apr 1:30-4. <a href=\"https://www.ncbi.nlm.nih.gov/pubmed/27038389\" target=\"_blank\">27038389</a></p>\n\t\t\t\t<p>Wanichthanarak K, Fan S, Grapov D, Barupal DK, Fiehn O (2017) Metabox: A Toolbox for Metabolomic Data Analysis, Interpretation and Integrative Exploration. PLOS ONE 12(1): e0171046. doi: 10.1371/journal.pone.0171046</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n      <!-- notify box -->\n        <div id=\"spinner\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" data-keyboard=\"false\" data-backdrop=\"static\">\n          <div class=\"modal-dialog\"><div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n              <h4>Computing ...</h4>\n              <span id=\"notifyTxt\"></span>\n            </div>\n            <div class=\"modal-body\"><div style=\"height:200px\">\n              <span id=\"loading_spinner\" style=\"position: absolute;display: block;top: 50%;left: 50%;\"></span>\n            </div></div>\n          </div></div>\n        </div>\n        <!-- /.notify box -->\n\n\n\n      </div>\n      <!-- /.container-fluid -->\n    </div>\n    <!-- /#page-wrapper -->\n  </div>\n  <!-- /#wrapper -->\n</body>\n</html>\n",
    "created" : 1487207322782.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1071961792",
    "id" : "7D5225A2",
    "lastKnownWriteTime" : 1489707691,
    "last_content_update" : 1489707691,
    "path" : "~/GitHub/WCMC_DA/WCMC.Normalization.mTIC/inst/www/index.html",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "html"
}